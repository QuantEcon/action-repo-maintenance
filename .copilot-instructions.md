# Copilot Instructions for action-repo-maintenance

> ⚠️ **CURRENTLY IN DEVELOPMENT** - This action is under active development. We are iterating on the implementation prior to issuing a release.

## Development Guidelines

### Documentation Standards

1. **Do NOT create SUMMARY files for changes**
   - Instead, update existing documentation such as README.md, CHANGELOG.md, and files in the docs/ folder
   - Keep documentation inline with code changes
   - Maintain a single source of truth for project information

2. **Create release notes in `docs/releases/`**
   - Release notes should be placed in `/docs/releases/` directory
   - Use version-specific files: `/docs/releases/v0.1.0.md`, `/docs/releases/v0.2.0.md`, etc.
   - Follow semantic versioning (MAJOR.MINOR.PATCH)
   - Include: features added, bugs fixed, breaking changes, and upgrade notes

3. **When using `gh` CLI tools, write results to `/tmp/`**
   - All temporary outputs from `gh` commands should be written to `/tmp/` directory
   - Use descriptive filenames: `/tmp/gh-repos-list.json`, `/tmp/gh-pr-data.json`
   - Clean up temporary files after processing when appropriate
   - Example: `gh repo list quantecon --json name,url --limit 100 > /tmp/gh-repos.json`

4. **Before making releases, always review `docs/` for currency**
   - Verify all documentation in docs/ is up to date with latest changes
   - Check that architecture.md reflects current design decisions
   - Ensure release notes are complete and accurate
   - Review README.md for accuracy and completeness
   - Update CHANGELOG.md with all changes since last release

## Code Style and Standards

### Python

- Follow PEP 8 style guide
- Use type hints for function signatures
- Prefer explicit imports over wildcard imports
- Maximum line length: 100 characters
- Use docstrings for all public functions and classes (Google style)

### Testing

- Write tests for all new features
- Aim for >80% code coverage
- Place tests in `tests/` directory mirroring the `src/` structure
- Use pytest for testing framework
- Mock external services (GitHub API, AWS S3) in unit tests

### Error Handling

- Use specific exception types
- Provide helpful error messages
- Log errors with appropriate context
- Fail gracefully with cleanup when possible

### Logging

- Use Python's `logging` module
- Log levels: DEBUG for development, INFO for operations, WARNING/ERROR for issues
- Include context in log messages (repo name, file paths, etc.)
- Structured logging preferred for production

## Project-Specific Guidelines

### Repository Patterns

- Use Python's `re` module for regex matching
- Test patterns against known repository names
- Document pattern syntax in configuration examples
- Handle edge cases (empty matches, too many matches)

### AWS S3 Integration

- Use boto3 for S3 operations
- Implement retry logic for network failures
- Verify uploads with checksums
- Use IAM roles when running in GitHub Actions
- Support both credentials and role-based authentication

### GitHub API Usage

- Use PyGithub library for GitHub interactions
- Respect rate limits (check headers, implement backoff)
- Cache API responses when appropriate
- Use pagination for large result sets
- Handle API errors gracefully

### Configuration

- Use YAML for configuration files
- Validate configuration on load
- Provide clear error messages for invalid config
- Support environment variable overrides
- Document all configuration options

## File Organization

```
action-repo-maintenance/
├── src/
│   ├── backup/          # Backup functionality
│   ├── common/          # Shared utilities
│   └── __init__.py
├── tests/
│   ├── unit/
│   ├── integration/
│   └── fixtures/
├── docs/
│   ├── releases/        # Version-specific release notes
│   └── architecture.md
├── .github/
│   └── workflows/
├── config.example.yml
├── requirements.txt
├── pyproject.toml
├── CHANGELOG.md
└── README.md
```

## Git Workflow

- Create feature branches from `main`
- Use descriptive commit messages
- Squash commits before merging
- Update CHANGELOG.md with each PR
- Tag releases with version numbers

## Security Considerations

- Never commit credentials or secrets
- Use GitHub Secrets for sensitive data
- Validate and sanitize all inputs
- Follow AWS security best practices
- Audit dependencies regularly

## Performance

- Implement pagination for large datasets
- Use concurrent operations where safe
- Cache expensive computations
- Monitor and log performance metrics
- Optimize for GitHub Actions runtime limits

## Maintenance Notes

This project is in active development. Breaking changes may occur between versions until v1.0.0 is released. Always review release notes before upgrading.
